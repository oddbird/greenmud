// Import --------------------------------------------------------------------
@import ../defaults/default-mixins

// grid ----------------------------------------------------------------------
$total-cols         : 12
$col-width          : 2.5em
$gutter-width       : .5em
$side-gutter-width  : $gutter-width

// defaults ----------------------------------------------------------------

.pagewrap
  +container

// title page ----------------------------------------------------------------

#titlepage
  h2
    @extend .title

// once-upon-sunday ----------------------------------------------------------

$rain: 'ch01/once-upon-sunday/rain.png'

+keyframes(rain)
  0%
    background-position: 0 (- image-height($rain)), image-height($rain)*.5 (- image-height($rain))
  100%
    background-position: (- image-width($rain)) 0, (- image-width($rain)*1.5) image-height($rain)

+keyframes(pitpotIn)
  0%
    +transform(translateY(100px) rotate(0deg))
    opacity: 0
  100%
    +transform(translateY(0) rotate(3deg))
    opacity: 1

+keyframes(pitpotOut)
  0%
    +transform(translateY(0) rotate(3deg))
    opacity: 1
  100%
    +transform(translateY(100px) rotate(0deg))
    opacity: 0

#once-upon-sunday
  +animate(rain,45s,$function:linear,$mode:infinite)
  background: image-url($rain) top left, desaturate($yellow-dark,50) image-url($rain) center

  .content
    position: relative

  blockquote
    +prefix(5,12)
    +padding-leader(2)
    +padding-trailer(2)
    position: relative

  .raindrop
    +replace-text('ch01/once-upon-sunday/raindrop.png')
    +background-size(contain)
    +stretch-y
    display: block
    left: columns(1,12)
    width: columns(4,12)
    z-index: 15

  i
    background: rgba($yellow-lighter,$small)

  .pitpot
    @extend .allcaps
    +adjust-font-size-to($smallpx)
    +rotate(3deg)
    +box-shadow($base 0 0 rhythm(1))
    position: absolute
    bottom: rhythm(2)
    background: rgba($red-light,$small)
    margin: 0 rhythm(-100)
    padding: 0 rhythm(50)
    text-align: center

  &.active-page
    .raindrop
      +animate(fadeInDownBig,3s)
    .pitpot
      +animate(pitpotIn,2s)
    i
      +animate(fadeIn,2s,2s)

