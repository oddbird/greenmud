// ----------------------------------------------------------------------------
// template

$total-columns  : 6;
$break          : 10;

$bg-color       : $off-green-hint;
$noise          : image-url('noise.png');
$background     : $bg-color $noise;
$border-width   : 2px;

$imgs     : 'frontmatter/';
$burst    : '#{$imgs}burst.png';
$bgburst  : image-url($burst) no-repeat scroll center rhythm(-2);

@include keyframes(template-burst) {
  0% { 
    background-color: $blue-hint;
    background-position: center rhythm(-8), center; 
  }
  100% { 
    background-color: $pink-hint;
    background-position: center rhythm(-2), center; 
  }
}

%social-icon {
  @extend %icon-replace;
  display: inline-block;
  width: rhythm(1);
  &:before { right: 0; }
}

%template {
  @include text-shadow(rgba($white,$small) 0 1px 1px);
  @include background($background repeat scroll);
  @include background($noise, 
    linear-gradient(bottom left, $yellow-hint, $off-green-hint)
  );  
  b { 
    @extend %allcaps; 
    white-space: nowrap;
    color: $darker;
  }

  .site-title, 
  [role="main"], 
  .footer {
    @include transition(max-width 300ms);
    @include container($total-columns,$break);
  }

  // banner ---------------//
  [role="banner"] {
    @include animation(template-burst 6s ease both);
    @include trailing-border($border-width,1.5);
    color: $darker;
    background: $pink-hint $noise;
    background: $bgburst, $pink-hint $noise;
    border-color: $base;
    a {
      #{$link} { 
        @include transition(all 200ms);
        @include transform-origin(0, 50%);
        display: inline-block;
        color: $darker; 
      }
      #{$focus} { 
        @include scale(1.2);
        color: $red-darker;
      } 
    }
    &:hover { h2 { @include animation(hinge 1.5s 10s ease both); } }
  }
  .site-title {
    @include padding-leader(1.5);
    h1 { @include adjust-font-size-to($largepx); }
  }

  // main ---------------//
  [role="main"] {
    @include padding-leader;
    @include padding-trailer;
    @extend %type;
  }

  // footer ---------------//
  $footer-color: $mid;
  $footer-highlight: $darker;

  [role="contentinfo"] {
    @include leading-border($border-width,.5);
    @include trailing-border($border-width,1.5);
    @include background($off-green-lightest $noise);
    border-color: $darker;
    color: $footer-color;
    a { 
      #{$link} { color: $footer-color; } 
      #{$focus} { color: $footer-highlight; }
    }
  }
  .license { 
    @extend %allcaps;
    @include adjust-font-size-to($smallpx,1.5); 
  }
  .social {
    @include adjust-font-size-to($largepx); 
    li { display: inline-block; }
    a { 
      @extend %social-icon; 
      #{$link} { color: rgba($footer-color,.5); }
      #{$focus} { color: $footer-highlight; }
    }
    [href*="twitter"] { @extend %icon-twitter; }
    [href*="facebook"] { @extend %icon-facebook; }
    [href*="github"] { @extend %icon-github; }
    [href*="andmeyer"] { @extend %icon-blog; }
    [href*="vimeo"] { @extend %icon-vimeo; }
  }
  @include at-breakpoint($break) {
    .license, .social { @include span-columns(5,$total-columns); }
    .social { 
      @include omega; 
      text-align: right;
      a { text-align: left; }
    }
  }
}

