/* ----------------------------------------------------------------------------
   title: Into the Green Green Mud */

$img            : 'frontmatter/';
$scribble       : '#{$img}scribble.png';

$title-angle    : 330deg;
$title-details  : $pink-hint,
                  $pink-hint 50%,
                  $off-green-lightest 50%,
                  $off-green-lightest;
$title-old      : linear-gradient($title-angle, $title-details);
$title-new      : fix-linear($title-angle, $title-details);

$titleimg       : '#{$img}titlepage/';
$line           : '#{$titleimg}line.png';
$left           : '#{$titleimg}strings_left.png';
$right          : '#{$titleimg}strings_right.png';
$angle          : '#{$titleimg}angle.svg';

$bg             : $off-green-lightest;
$line-pos       : 52%;
$string-pos     : bottom;
$grad-pos       : center;
$line-break     : base(30em);

$line-start     : image-width($line);
$line-end       : 0;

@include keyframes(line) {
  0% { background-position: $line-start $line-pos; }
  100% { background-position: $line-end $line-pos; }
}

#title {
  @include background($noise-layer, $title-old, $bg);
  background: $noise-layer, $title-new, $bg;

  // --------------------------------------------
  // Main content
  [role="main"] {
    @include transition(padding 300ms);
    @include pagepad(15 1, 18 2);
    @include breakpoint($line-break) {
      @include animation(line 30s linear infinite both);
      @include background(image-url($line) repeat-x scroll $line-start $line-pos);
      @include background-origin(content-box);
    }
  }

  .wrap1 {
    @extend %transition;
    @include rhythm-padding;
    @include background(
      image-url($left) no-repeat scroll (0 - image-width($left)*1.5) $string-pos,
      image-url($right) no-repeat scroll (50*16px + image-width($right)*.5) $string-pos
    );
    @include breakpoint($line-break) { background-position: left $string-pos, right $string-pos; }
  }

  .wrap2 {
    @include container;
    color: $darker;
    text-align: center;
  }

  // --------------------------------------------
  // Elements
  h1, h2 {
    font-weight: bold;
  }
  h1 {
    @include adjust-font-size-to($largepx);
  }
  h2 {
    @include padding-trailer(6.5);
    @include trailer(.5);
    background: image-url($scribble) no-repeat scroll center bottom;
  }

  a {
    #{$link} {
      @extend %allcaps;
      color: $off-blue-dark;
    }
    #{$focus} { color: $off-pink-dark; }
  }
}
