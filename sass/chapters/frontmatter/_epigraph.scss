/* ----------------------------------------------------------------------------
   epigraph: cocorosie */

$bg           : $darkest;

$fg-angle     : 320deg;
$fg-details   : rgba($off-blue-hint,0),
                rgba($off-blue-hint,0) 50%,
                rgba($off-blue-hint,.9) 50%,
                rgba($off-blue-hint,.9);
$fg-old       : linear-gradient($fg-angle, $fg-details...);
$fg-new       : fix-linear($fg-angle, $fg-details...);

$pg           : '#{$ch}epigraph/';
$lightning    : image-url('#{$pg}lightning.png') no-repeat scroll 50% rhythm(-1);
$angle        : image-url('#{$pg}angle.svg') no-repeat center;
$default-pos  : top left;

@include keyframes(lightning) {
  0%, 49%, 51%, 53%, 55%, 57%, 100% {
    background-position: $default-pos, center rhythm(-1);
  }
  50%{
    background-position: $default-pos, rhythm(-3) rhythm(-10);
  }
  52%, 56% {
    background-position: $default-pos, center rhythm(-3);
  }
  54% {
    background-position: $default-pos, rhythm(50) rhythm(-5);
  }
}

#epigraph {
  @extend %type;
  @include back($bg);
  position: relative;

  .lightning {
    @include stretch;
    @include animation(lightning 10s infinite both);
    @include background($lightning);
    @include background($fg-old, $lightning);
    background: $fg-new, $lightning;
    .no-cssgradients & {
      @include background($angle, $lightning);
      @include background-size(cover, auto);
    }
  }

  blockquote {
    @extend %transition;
    @include pagepad(15 2 1);
    padding: rhythm(1);
    color: $light;
  }

  p {
    @extend %transition;
    @extend %shrink;
  }

}
