// ----------------------------------------------------------------------------
// Book Titles

%booktitle {
  [role="main"] {
    @extend %transition;
    @include rhythm-padding(3,1);
    @include pagepad(15 6 1);
    text-align: center;
    text-transform: uppercase;
    color: $darker;
  }

  h1 { @include adjust-font-size-to($largepx); }
  h1, h2 { @extend %transition; }
  h2 { font-weight: bold; }

  @include breakpoint(40em) {
    h1 { @include adjust-font-size-to($xxlargepx); }
    h2 { @include trailer(.5); }
  }
}

// ----------------------------------------------------------------------------
// Chapter Titles

$total-columns: 4;
$break: 8;

@mixin titlecolor($b: rgba(white,.675), $a: $b) {
  [role="main"] {
    &::before { background-color: $b; }
    &::after { background-color: $a; }
  }
}

%chaptertitle {
  @extend %transition;
  @include rhythm-padding(3,1);
  @include pagepad(15 6 1);
  overflow-x: hidden;

  [role="main"] {
    @extend %transition;
    @include set-container-width;
    position: relative;
    margin: 0 auto;
    padding: rhythm(1.5) $grid-padding;
    text-align: center;
    &::before, &::after {
      @extend %transition;
      @include stretch-y;
      content: " ";
      left: -200%;
      right: -200%;
      z-index: 0;
    }
    &::before { @include rotate(-1.5deg); }
    &::after { @include rotate(1.5deg); }
    &:hover {
      &::before { @include rotate(.5deg); }
      &::after { @include rotate(-.5deg); }
    }
  }

  h1, h2 {
    @extend %transition;
    position: relative;
    display: inline-block;
    vertical-align: middle;
    z-index: 1;
  }

  h1 { @include adjust-font-size-to($largepx,1.5); }
  h2 {
    @extend %allcaps;
    @include adjust-leading-to(1.5);
  }

  @include titlecolor;

  @include at-breakpoint($break) {
    [role="main"] { @include set-container-width; }

    h1, h2 { width: columns(4); }
    h1 { margin-right: - gutter(); }
    h2 { margin-right: gutter(); }
  }
}
